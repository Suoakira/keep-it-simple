{"ast":null,"code":"import _classCallCheck from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/src/components/exisitingplancard.js\";\nimport React, { Component } from 'react';\nimport { Button, List, Progress, Loader, Statistic } from 'semantic-ui-react';\nimport API from \"../API\";\nimport DetailsModal from \"../components/detailspage\";\nimport DeleteModal from \"../components/deletemodal\";\nimport MapComments from \"../containers/mapcomments\";\n\nvar exisitingPlanCard =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(exisitingPlanCard, _Component);\n\n  function exisitingPlanCard(props) {\n    var _this;\n\n    _classCallCheck(this, exisitingPlanCard);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(exisitingPlanCard).call(this, props));\n\n    _this.noDaysBetween = function (date1, date2) {\n      var oneDay = 24 * 60 * 60 * 1000;\n      var daysToGo = Math.round(Math.abs((date2.getTime() - date1.getTime()) / oneDay));\n      return daysToGo;\n    };\n\n    _this.leftToSave = function () {\n      return _this.noDaysToGo() * _this.averageSavingperDay();\n    };\n\n    _this.hasSavedSofar = function () {\n      return _this.noDaysExpired() * _this.averageSavingperDay();\n    };\n\n    _this.averageSavingperDay = function (amount) {\n      return Math.round(_this.props.amount / _this.totalNoDays());\n    };\n\n    _this.noDaysExpired = function () {\n      var startDate = new Date(_this.props.savingTargets.start_date);\n      var currentDate = new Date(Date.now());\n      return _this.noDaysBetween(startDate, currentDate);\n    };\n\n    _this.totalNoDays = function () {\n      var startDate = new Date(_this.props.savingTargets.start_date);\n      var endDate = new Date(_this.props.savingTargets.end_date);\n      return _this.noDaysBetween(startDate, endDate);\n    };\n\n    _this.noDaysToGo = function () {\n      var currentDate = new Date(Date.now());\n      var endDate = new Date(_this.props.savingTargets.end_date);\n\n      var daysToGo = _this.noDaysBetween(currentDate, endDate);\n\n      if (daysToGo > 0) {\n        return daysToGo;\n      } else {\n        return 0;\n      }\n    };\n\n    _this.convertDateToString = function () {\n      return new Date(Date.parse(_this.props.savingTargets.start_date)).toDateString();\n    };\n\n    _this.deletePlan = function () {\n      API.deleteSavingTarget(_this.props.savingTargets);\n\n      _this.props.localeDelete(_this.props.savingTargets);\n    };\n\n    _this.percentToSave = function () {\n      if (_this.props.savingTargets) {\n        var percent = _this.leftToSave() / _this.props.amount * 100;\n        return Math.round(percent);\n      }\n    };\n\n    _this.totalStateAmount = function (array) {\n      var amount = 0;\n      array.forEach(function (savingTarget) {\n        return amount += savingTarget.amount;\n      });\n      return amount;\n    };\n\n    _this.open = function () {\n      return _this.setState({\n        open: true\n      });\n    };\n\n    _this.close = function () {\n      return _this.setState({\n        open: false\n      });\n    };\n\n    _this.showDelete = function () {\n      return _this.setState({\n        openDelete: true\n      });\n    };\n\n    _this.closeDelete = function () {\n      return _this.setState({\n        openDelete: false\n      });\n    };\n\n    _this.closeAndDelete = function () {\n      _this.deletePlan();\n\n      _this.setState({\n        openDelete: false\n      });\n    };\n\n    _this.showComment = function () {\n      return _this.setState({\n        openComment: true\n      });\n    };\n\n    _this.closeComment = function () {\n      return _this.setState({\n        openComment: false\n      });\n    };\n\n    _this.state = {\n      userSavingTargets: undefined,\n      open: false,\n      openDelete: false,\n      openComment: false,\n      percent: 0\n    };\n    return _this;\n  }\n\n  _createClass(exisitingPlanCard, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      fetch(\"http://localhost:3000/api/v1/saving_targets/\".concat(this.props.savingTargets.id)).then(function (data) {\n        return data.json();\n      }).then(function (savingTs) {\n        return _this2.setState({\n          userSavingTargets: savingTs\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          open = _this$state.open,\n          openDelete = _this$state.openDelete,\n          userSavingTargets = _this$state.userSavingTargets,\n          openComment = _this$state.openComment;\n      var close = this.close,\n          closeDelete = this.closeDelete,\n          closeAndDelete = this.closeAndDelete,\n          showComment = this.showComment,\n          closeComment = this.closeComment;\n      var _this$props = this.props,\n          savingTargets = _this$props.savingTargets,\n          userId = _this$props.userId,\n          amount = _this$props.amount;\n      return savingTargets ? React.createElement(\"div\", {\n        className: \"four wide \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ui link cards\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card\",\n        id: \"cardpad\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: savingTargets.target_image,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, savingTargets.category)), React.createElement(\"div\", {\n        className: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, savingTargets.name)), React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, this.state.userSavingTargets ? React.createElement(\"div\", {\n        className: \"extra content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(List, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(List.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(List.Icon, {\n        className: \"coloricons\",\n        name: \"calendar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), React.createElement(List.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, this.noDaysToGo()), \" Days to Deadline\")), React.createElement(List.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(List.Icon, {\n        className: \"coloricons\",\n        name: \"lock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }), React.createElement(List.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, this.averageSavingperDay(amount)), \" saved per day\")), React.createElement(List.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(List.Icon, {\n        className: \"coloricons\",\n        name: \"pound sign\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }), React.createElement(List.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, this.hasSavedSofar()), \"/\", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, amount), \" Raised\")), React.createElement(List.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(List.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(Progress, {\n        percent: 100 - this.percentToSave(),\n        indicating: true,\n        progress: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }))))) : React.createElement(Loader, {\n        active: true,\n        inline: \"centered\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"extra content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"right floated\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(Button, {\n        negative: true,\n        size: \"small\",\n        onClick: function onClick() {\n          return _this3.showDelete();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"X\"), React.createElement(Button, {\n        primary: true,\n        size: \"small\",\n        onClick: function onClick() {\n          return _this3.open();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"Stats\"), React.createElement(Button, {\n        primary: true,\n        size: \"small\",\n        onClick: function onClick() {\n          return showComment();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"comment icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }), savingTargets.plan == \"group\" ? \"Comment\" : \"Notes\")), React.createElement(DeleteModal, {\n        name: savingTargets.name,\n        openDelete: openDelete,\n        closeDelete: closeDelete,\n        closeAndDelete: closeAndDelete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }), React.createElement(DetailsModal, {\n        open: open,\n        close: close,\n        image: savingTargets.target_image,\n        name: savingTargets.name,\n        category: savingTargets.category,\n        daysToGo: this.noDaysToGo(),\n        totalDays: this.totalNoDays(),\n        daysSoFar: this.noDaysExpired(),\n        savingPerDay: this.averageSavingperDay(),\n        leftToSave: this.leftToSave(),\n        savedSoFar: this.hasSavedSofar(),\n        percentSave: this.percentToSave(),\n        userSavingTargets: savingTargets,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }), React.createElement(MapComments, {\n        open: openComment,\n        savingTargets: savingTargets,\n        close: closeComment,\n        userSavingTargets: this.state.userSavingTargets,\n        savingTargetId: savingTargets.id,\n        userId: userId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"extra content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"right floated\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, \"Plan Launched \", this.convertDateToString()), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }))))) : React.createElement(Loader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, \"Loading\");\n    }\n  }]);\n\n  return exisitingPlanCard;\n}(Component);\n\nexport default exisitingPlanCard;","map":{"version":3,"sources":["/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/src/components/exisitingplancard.js"],"names":["React","Component","Button","List","Progress","Loader","Statistic","API","DetailsModal","DeleteModal","MapComments","exisitingPlanCard","props","noDaysBetween","date1","date2","oneDay","daysToGo","Math","round","abs","getTime","leftToSave","noDaysToGo","averageSavingperDay","hasSavedSofar","noDaysExpired","amount","totalNoDays","startDate","Date","savingTargets","start_date","currentDate","now","endDate","end_date","convertDateToString","parse","toDateString","deletePlan","deleteSavingTarget","localeDelete","percentToSave","percent","totalStateAmount","array","forEach","savingTarget","open","setState","close","showDelete","openDelete","closeDelete","closeAndDelete","showComment","openComment","closeComment","state","userSavingTargets","undefined","fetch","id","then","data","json","savingTs","userId","target_image","category","name","plan"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button, List, Progress, Loader, Statistic } from 'semantic-ui-react'\nimport API from \"../API\"\nimport DetailsModal from \"../components/detailspage\"\nimport DeleteModal from \"../components/deletemodal\"\nimport MapComments from \"../containers/mapcomments\"\n\nclass exisitingPlanCard extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            userSavingTargets: undefined,\n            open: false,\n            openDelete: false,\n            openComment: false,\n            percent: 0\n         }\n    }\n\n    noDaysBetween = (date1, date2) => {\n        const oneDay = 24 * 60 * 60 * 1000\n        const daysToGo = Math.round(Math.abs((date2.getTime() - date1.getTime()) / (oneDay)))\n        return daysToGo\n    }\n\n    leftToSave = () => {\n        return (this.noDaysToGo() * this.averageSavingperDay())       \n    }\n\n    hasSavedSofar = () => {\n        return (this.noDaysExpired() * this.averageSavingperDay())   \n    }\n\n    averageSavingperDay = (amount) => {\n        return Math.round(this.props.amount/this.totalNoDays())    \n    }\n\n    noDaysExpired = () => {\n        const startDate = new Date(this.props.savingTargets.start_date)\n        const currentDate = new Date(Date.now())\n        return this.noDaysBetween(startDate, currentDate)\n\n    }\n\n    totalNoDays = () => {\n        const startDate = new Date (this.props.savingTargets.start_date)\n        const endDate = new Date (this.props.savingTargets.end_date)\n        return this.noDaysBetween(startDate, endDate)\n    }\n\n    noDaysToGo = () => {\n        const currentDate = new Date(Date.now())\n        const endDate = new Date(this.props.savingTargets.end_date)\n        const daysToGo = this.noDaysBetween(currentDate, endDate)\n        if (daysToGo > 0) {\n            return daysToGo\n        } else {\n            return 0\n        }   \n    }\n\n    convertDateToString = () => \n         new Date(Date.parse(this.props.savingTargets.start_date)).toDateString()\n\n    \n    deletePlan = () => {\n        API.deleteSavingTarget(this.props.savingTargets)\n        this.props.localeDelete(this.props.savingTargets)\n    }\n\n    percentToSave = () => {\n        if (this.props.savingTargets) {\n            const percent = (this.leftToSave() / this.props.amount) * 100\n            return Math.round(percent)\n        }\n    }\n\n    // totalAmount = () => {\n    //     let amount = 0\n    //     this.state.userSavingTargets.user_saving_targets.forEach(savingTarget => amount += savingTarget.amount)\n    //     return amount\n    // }\n\n    totalStateAmount = (array) => {\n        let amount = 0\n        array.forEach(savingTarget => amount += savingTarget.amount)\n        return amount\n    }\n\n    // more info button modal operation\n    open = () => this.setState({ open: true })\n    close = () => this.setState({ open: false })\n\n    // delete modal open close\n    showDelete = () => this.setState({ openDelete: true })\n    closeDelete = () => this.setState({ openDelete: false })\n    closeAndDelete = () => {\n        this.deletePlan()\n        this.setState({ openDelete: false })\n    }\n\n    // comment modal open close\n    showComment = () => this.setState({ openComment: true })\n    closeComment = () => this.setState({ openComment: false })\n\n    componentWillMount() {\n        fetch(`http://localhost:3000/api/v1/saving_targets/${this.props.savingTargets.id}`)\n            .then(data => data.json())\n            .then(savingTs => this.setState({ \n                userSavingTargets: savingTs,\n            }))\n    }\n\n    render() { \n        \n        const { open, openDelete, userSavingTargets, openComment } = this.state\n        const { close, closeDelete, closeAndDelete, showComment, closeComment } = this\n        const { savingTargets, userId, amount } = this.props\n\n\n            return (\n\n                savingTargets ?\n            <div className=\"four wide \">  \n                <div className=\"ui link cards\">\n                    <div className=\"card\" id=\"cardpad\">\n                        <div className=\"image\">\n                        <img src={savingTargets.target_image} />\n                        </div>\n                        <div className=\"content\">\n                            <div className=\"header\">\n                                <a>{savingTargets.category}</a>\n                             </div>\n                            <div className=\"description\">\n                                {savingTargets.name}\n                            </div>\n                        </div>\n                        <React.Fragment>\n                            {this.state.userSavingTargets ?\n                              \n                                <div className=\"extra content\">\n\n                                    <List>\n                                        <List.Item>                                \n                                            <List.Icon className=\"coloricons\" name='calendar' />\n                                            <List.Content><b>{this.noDaysToGo()}</b> Days to Deadline</List.Content>                                  \n                                        </List.Item>\n                                        <List.Item>\n                                            <List.Icon className=\"coloricons\"  name='lock' />\n                                                    <List.Content><b>{this.averageSavingperDay(amount)}</b> saved per day</List.Content>\n                                        </List.Item>\n                                        <List.Item>\n                                                    <List.Icon className=\"coloricons\" name='pound sign' />\n                                                    <List.Content><b>{this.hasSavedSofar()}</b>/<b>{amount}</b> Raised</List.Content>\n                                        </List.Item>\n                                        <List.Item>\n                                            <List.Content>\n                                                <Progress percent={100 - this.percentToSave()} indicating progress />\n                                            </List.Content>\n                                        </List.Item>      \n                                    </List>\n                                </div>\n                                    :\n                                    <Loader active inline='centered' />\n                   \n                            }\n                            </React.Fragment>\n                            <div className=\"extra content\">\n                            <span className=\"right floated\">\n                                <div className=\"center\">\n                                <Button\n                                    negative\n                                    size=\"small\"\n                                    onClick={() => this.showDelete()}\n                                >\n                                X\n                                </Button>\n                                <Button\n                                    primary\n                                    size=\"small\"\n                                    onClick={() => this.open() }\n                                >\n                                    Stats\n                                </Button>\n                                \n                                <Button\n                                    primary\n                                    size=\"small\"\n                                    onClick={() => showComment() }\n                                >\n                             \n                                <i class=\"comment icon\"></i>\n                                {(savingTargets.plan == \"group\") ?\n                                \"Comment\"\n                                :\n                                \"Notes\"\n                                }\n                                </Button>\n                                        </div>\n                                <DeleteModal\n                                name={savingTargets.name}\n                                openDelete={openDelete}\n                                closeDelete={closeDelete}\n                                closeAndDelete={closeAndDelete}\n                                        />\n                                <DetailsModal \n                                    open={open} \n                                    close={close}\n                                    image={savingTargets.target_image}\n                                    name={savingTargets.name}\n                                    category={savingTargets.category}\n                                    daysToGo={this.noDaysToGo()}\n                                    totalDays={this.totalNoDays()}\n                                    daysSoFar={this.noDaysExpired()}\n                                    savingPerDay={this.averageSavingperDay()}\n                                    leftToSave={this.leftToSave()}\n                                    savedSoFar={this.hasSavedSofar()}\n                                    percentSave={this.percentToSave()}\n                                    userSavingTargets={savingTargets}\n                                />\n                                <MapComments\n                                    open={openComment}\n                                    savingTargets={savingTargets}\n                                    close={closeComment}\n                                    userSavingTargets={this.state.userSavingTargets}\n                                    savingTargetId={savingTargets.id}\n                                    userId={userId}\n                                 />\n                            </span>\n                                \n                            </div>\n                            <div className=\"extra content\">\n                                <span className=\"right floated\">\n                            Plan Launched {this.convertDateToString()}\n                            </span>\n                            <span>  \n                                {/* {savingTargets.end_date} */}\n                            </span>\n                            </div>\n\n                    </div>\n                </div>\n            </div>\n            :\n\n            <Loader>Loading</Loader>\n            \n\n            )\n        \n         \n    }\n}\n \nexport default exisitingPlanCard;"]},"metadata":{},"sourceType":"module"}