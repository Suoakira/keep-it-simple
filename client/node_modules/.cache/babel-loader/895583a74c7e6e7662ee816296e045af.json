{"ast":null,"code":"import _defineProperty from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/src/components/savingsform.js\";\nimport React, { Component } from 'react';\nimport { Button, Divider, Grid, Header, Icon, Search, Segment, Select, Form, Message } from 'semantic-ui-react';\nimport API from \"../API\";\nimport { Redirect } from \"react-router-dom\";\nimport { DateInput, TimeInput, DateTimeInput, DatesRangeInput } from 'semantic-ui-calendar-react';\n\nvar SavingsForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SavingsForm, _Component);\n\n  function SavingsForm(props) {\n    var _this$state2;\n\n    var _this;\n\n    _classCallCheck(this, SavingsForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SavingsForm).call(this, props));\n\n    _this.splitDate = function (date) {\n      return date.split(\" - \");\n    };\n\n    _this.handleChange = function (e, _ref) {\n      var name = _ref.name,\n          value = _ref.value;\n      return _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n      var SavingTargetId = undefined;\n      var _this$state = _this.state,\n          name = _this$state.name,\n          category = _this$state.category,\n          target_image = _this$state.target_image,\n          plan = _this$state.plan,\n          datesRange = _this$state.datesRange,\n          user_id = _this$state.user_id,\n          amount = _this$state.amount;\n      var SavingTarget = {\n        name: name,\n        start_date: _this.splitDate(datesRange)[0],\n        end_date: _this.splitDate(datesRange)[1],\n        category: category,\n        target_image: target_image,\n        plan: plan\n      };\n      API.postSavingsTarget(SavingTarget).then(function (resp) {\n        if (resp.error) {\n          console.log(resp.error);\n\n          _this.setState({\n            errorST: resp.error\n          });\n\n          _this.setState({\n            error: resp.error\n          });\n        } else {\n          SavingTargetId = resp.id;\n          console.log(resp);\n        }\n      }).then(function () {\n        return API.postUserSavingsTarget({\n          user_id: user_id,\n          saving_target_id: SavingTargetId,\n          amount: amount\n        });\n      }).then(function (resp) {\n        if (resp.error) {\n          console.log(resp.error);\n\n          _this.setState({\n            errorUST: resp.error\n          });\n        } else {\n          _this.setState({\n            submit: true\n          });\n\n          console.log(resp);\n        }\n      });\n    };\n\n    _this.state = (_this$state2 = {\n      name: undefined,\n      start_date: undefined,\n      end_date: undefined,\n      category: undefined,\n      target_image: undefined,\n      plan: undefined,\n      user_id: undefined,\n      datesRange: '',\n      amount: undefined\n    }, _defineProperty(_this$state2, \"user_id\", undefined), _defineProperty(_this$state2, \"propSavingTargets\", undefined), _defineProperty(_this$state2, \"errorST\", \"\"), _defineProperty(_this$state2, \"errorUST\", \"\"), _defineProperty(_this$state2, \"submit\", false), _this$state2);\n    return _this;\n  }\n\n  _createClass(SavingsForm, [{\n    key: \"componentDidMount\",\n    // make post user_saving_targets(user, saving_target, amount) ????\n    value: function componentDidMount() {\n      this.setState({\n        storedUserDetails: this.props.storedUserDetails,\n        user_id: this.props.storedUserDetails.id\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state3 = this.state,\n          name = _this$state3.name,\n          category = _this$state3.category,\n          target_image = _this$state3.target_image,\n          amount = _this$state3.amount,\n          plan = _this$state3.plan;\n      var planOptions = [{\n        key: 'p',\n        text: 'Personal',\n        value: 'Personal'\n      }, {\n        key: 'g',\n        text: 'Group',\n        value: 'Group'\n      }];\n      return React.createElement(\"div\", {\n        className: \"wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, !this.state.submit ? React.createElement(Segment, {\n        placeholder: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        columns: 2,\n        stackable: true,\n        textAlign: \"left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(Grid.Row, {\n        verticalAlign: \"middle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(Grid.Column, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Create Savings Plan\"), React.createElement(Form, {\n        error: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(Form.Input, {\n        label: \"Plan Name\",\n        placeholder: \"Name\",\n        name: \"name\",\n        value: name,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      })), this.state.errorST && this.state.errorUST && !this.state.name ? React.createElement(\"div\", {\n        className: \"make-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Please enter a valid Plan Name.\")) : null, React.createElement(Form.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Form.Field, {\n        control: Select,\n        options: planOptions,\n        label: {\n          children: 'Plan type?',\n          htmlFor: 'planOptions'\n        },\n        placeholder: \"Plan\",\n        search: true,\n        name: \"plan\",\n        value: plan,\n        onChange: this.handleChange,\n        searchInput: {\n          id: 'planOptions'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      })), this.state.errorST && this.state.errorUST && !this.state.plan ? React.createElement(\"div\", {\n        className: \"make-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"Please select a Plan type.\")) : null, React.createElement(Form.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(Form.Input, {\n        label: \"Category\",\n        placeholder: \"Category\",\n        name: \"category\",\n        value: category,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      })), this.state.errorST && this.state.errorUST && !this.state.category ? React.createElement(\"div\", {\n        className: \"make-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Please enter a valid category Name\")) : null, React.createElement(Form.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(Form.Input, {\n        label: \"Image Url\",\n        placeholder: \"Image\",\n        name: \"target_image\",\n        value: target_image,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      })), this.state.errorST && this.state.errorUST && !this.state.target_image ? React.createElement(\"div\", {\n        className: \"make-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"Please enter a valid image url.\")) : null, React.createElement(Form.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(Form.Input, {\n        type: \"number\",\n        label: \"Amount to save (\\xA3)\",\n        placeholder: \"Amount\",\n        name: \"amount\",\n        value: amount,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      })), this.state.errorST && this.state.errorUST && !this.state.target_image ? React.createElement(\"div\", {\n        className: \"make-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"Please enter an amount to save.\")) : null, React.createElement(Form.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(DatesRangeInput, {\n        label: \"Plan Start/End dates\",\n        name: \"datesRange\",\n        placeholder: \"From - To\",\n        value: this.state.datesRange,\n        iconPosition: \"left\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      })), this.state.errorST && this.state.errorUST && !this.state.start_date && !this.state.end_date ? React.createElement(\"div\", {\n        className: \"make-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, \"Please enter a valid start, and end date\")) : null, React.createElement(\"div\", {\n        class: \"ui medium primary button\",\n        onClick: function onClick(event) {\n          return _this2.handleSubmit(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \"Create Plan \", React.createElement(\"i\", {\n        class: \"right arrow icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      })), this.state.error ? React.createElement(Message, {\n        error: true,\n        header: \"Action Forbidden\",\n        content: this.state.error,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }) : null)), React.createElement(Grid.Column, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, !this.state.target_image ? React.createElement(\"img\", {\n        src: \"https://cmkt-image-prd.global.ssl.fastly.net/0.1.0/ps/2014090/1360/2035/m1/fpnw/wm1/qdrpofpduuwwhs9zz7ayfuobitf8xwo42xcvdclixbrxaa4iabpct82rvc5zxrlf-.jpg?1481494830&s=dca5b92f8fe1937750c7cd78d4777c1d\",\n        id: \"savings-image1\",\n        alt: \"plant growing out of hand\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }) : React.createElement(Segment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.state.target_image,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }))))))) : React.createElement(Redirect, {\n        to: \"/home/exisitingplans\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return SavingsForm;\n}(Component);\n\nexport default SavingsForm;","map":{"version":3,"sources":["/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/src/components/savingsform.js"],"names":["React","Component","Button","Divider","Grid","Header","Icon","Search","Segment","Select","Form","Message","API","Redirect","DateInput","TimeInput","DateTimeInput","DatesRangeInput","SavingsForm","props","splitDate","date","split","handleChange","e","name","value","setState","handleSubmit","event","preventDefault","SavingTargetId","undefined","state","category","target_image","plan","datesRange","user_id","amount","SavingTarget","start_date","end_date","postSavingsTarget","then","resp","error","console","log","errorST","id","postUserSavingsTarget","saving_target_id","errorUST","submit","storedUserDetails","planOptions","key","text","children","htmlFor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Button, Divider, Grid, Header, Icon, Search, Segment, Select, Form, Message } from 'semantic-ui-react'\n\nimport API from \"../API\"\nimport { Redirect } from \"react-router-dom\"\n\n\nimport {\n    DateInput,\n    TimeInput,\n    DateTimeInput,\n    DatesRangeInput\n} from 'semantic-ui-calendar-react';\n\nclass SavingsForm extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n                name: undefined,\n                start_date: undefined,\n                end_date: undefined,\n                category: undefined,\n                target_image: undefined,\n                plan: undefined,\n                user_id: undefined,\n                datesRange: '',\n                amount: undefined,\n                user_id: undefined,\n                propSavingTargets: undefined,\n                errorST: \"\",\n                errorUST: \"\",\n                submit: false\n            }\n        }\n\n    splitDate = (date) => {\n        return date.split(\" - \")\n    }\n\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n\n    handleSubmit = (event) => {\n        event.preventDefault()\n        let SavingTargetId = undefined\n        const { name, category, target_image, plan, datesRange, user_id, amount } = this.state\n        const SavingTarget = {\n            name: name,\n            start_date: this.splitDate(datesRange)[0],\n            end_date: this.splitDate(datesRange)[1],\n            category: category,\n            target_image: target_image,\n            plan: plan\n        }\n        API.postSavingsTarget(SavingTarget)\n            .then(resp => {\n                if (resp.error){\n                    console.log(resp.error)\n                    this.setState({ errorST: resp.error })\n                    this.setState({error: resp.error})\n                } else {\n                SavingTargetId = resp.id\n                console.log(resp)\n                }\n            })\n            .then(() => API.postUserSavingsTarget(\n                {\n                user_id: user_id,\n                saving_target_id: SavingTargetId,\n                amount: amount\n                }\n            )).then(resp => {\n                if (resp.error) {\n                    console.log(resp.error)\n                    this.setState({ errorUST: resp.error })\n                } else {\n                    this.setState({submit: true})\n                    console.log(resp)\n                }\n                })     \n    }\n    // make post user_saving_targets(user, saving_target, amount) ????\n\n    componentDidMount() {\n        this.setState({\n            storedUserDetails: this.props.storedUserDetails,\n            user_id: this.props.storedUserDetails.id\n        })\n    }\n\n    render() { \n        const { name, category, target_image, amount, plan } = this.state\n        const planOptions = [\n            { key: 'p', text: 'Personal', value: 'Personal' },\n            { key: 'g', text: 'Group', value: 'Group' },\n        ]\n\n        return (\n            <div className=\"wrapper\">\n                {!this.state.submit ?\n                <Segment placeholder>\n                    <Grid columns={2} stackable textAlign='left'>\n                    \n                            <Grid.Row verticalAlign='middle'>\n                                <Grid.Column>\n                                <Header>Create Savings Plan</Header>\n                            <Form error>\n                                <Form.Group>\n                                    <Form.Input label=\"Plan Name\" placeholder='Name' name='name' value={name} onChange={this.handleChange} />\n                                </Form.Group>\n\n                                    {(this.state.errorST && this.state.errorUST && !this.state.name) ?\n                                        <div className=\"make-center\">\n                                            <p>Please enter a valid Plan Name.</p>\n                                        </div>\n                                        :\n                                        null\n                                    }\n                                <Form.Group>\n                                    \n                                    <Form.Field\n                            \n                                        control={Select}\n                                        options={planOptions}\n                                            label={{ children: 'Plan type?', htmlFor: 'planOptions' }}\n                                        placeholder='Plan'\n                                        search\n                                        name=\"plan\"\n                                        value={plan}\n                                        onChange={this.handleChange}\n                                            searchInput={{ id: 'planOptions' }}\n                                    />\n\n                                </Form.Group>\n                                    {(this.state.errorST && this.state.errorUST && !this.state.plan) ?\n                                        <div className=\"make-center\">\n                                            <p>Please select a Plan type.</p>\n                                        </div>\n                                        :\n                                        null\n                                    }\n\n                                <Form.Group>\n                                        <Form.Input label=\"Category\" placeholder='Category' name='category' value={category} onChange={this.handleChange} />\n                                </Form.Group>\n                                    {(this.state.errorST && this.state.errorUST && !this.state.category) ?\n                                        <div className=\"make-center\">\n                                            <p>Please enter a valid category Name</p>\n                                        </div>\n                                        :\n                                        null\n                                    }\n\n                                <Form.Group>\n                                <Form.Input label=\"Image Url\" placeholder='Image' name='target_image' value={target_image} onChange={this.handleChange}  />\n                                </Form.Group>\n                                    {(this.state.errorST && this.state.errorUST && !this.state.target_image) ?\n                                        <div className=\"make-center\">\n                                            <p>Please enter a valid image url.</p>\n                                        </div>\n                                        :\n                                        null\n                                    }\n\n                                <Form.Group>\n                                <Form.Input type=\"number\" label=\"Amount to save (Â£)\" placeholder='Amount' name='amount' value={amount} onChange={this.handleChange} />\n                                </Form.Group>\n\n                                    {(this.state.errorST && this.state.errorUST && !this.state.target_image) ?\n                                        <div className=\"make-center\">\n                                            <p>Please enter an amount to save.</p>\n                                        </div>\n                                        :\n                                        null\n                                    }\n                                \n                                <Form.Group>\n                                    <DatesRangeInput\n                                        label=\"Plan Start/End dates\"\n                                        name=\"datesRange\"\n                                        placeholder=\"From - To\"\n                                        value={this.state.datesRange}\n                                        iconPosition=\"left\"\n                                        onChange={this.handleChange} />\n                                    \n                                </Form.Group>\n\n                                    {(this.state.errorST && this.state.errorUST && !this.state.start_date && !this.state.end_date ) ?\n                                        <div className=\"make-center\">\n                                            <p>Please enter a valid start, and end date</p>\n                                        </div>\n                                        :\n                                        null\n                                    }\n                                    <div class=\"ui medium primary button\" onClick={(event) => this.handleSubmit(event)}>Create Plan <i class=\"right arrow icon\"></i></div>\n                                    {this.state.error ?\n                                        <Message\n                                            error\n                                            header='Action Forbidden'\n                                            content={this.state.error}\n                                        />\n                                        :\n                                        null\n                                    }\n                            </Form>\n                            </Grid.Column>\n                            <Grid.Column>\n                                    <div>\n                                        {!this.state.target_image?\n                                        <img src=\"https://cmkt-image-prd.global.ssl.fastly.net/0.1.0/ps/2014090/1360/2035/m1/fpnw/wm1/qdrpofpduuwwhs9zz7ayfuobitf8xwo42xcvdclixbrxaa4iabpct82rvc5zxrlf-.jpg?1481494830&s=dca5b92f8fe1937750c7cd78d4777c1d\" id=\"savings-image1\" alt=\"plant growing out of hand\" />\n                                        :\n                                        <Segment>\n                                            <img src={this.state.target_image}/>\n                                        </Segment>\n                                        }\n\n                                    </div>\n             \n                            </Grid.Column>\n                        </Grid.Row>\n                    </Grid>\n            </Segment>\n            :\n                    <Redirect to=\"/home/exisitingplans\" />\n                }\n            </div>\n\n\n \n\n\n         )\n    }\n}\n \nexport default SavingsForm"]},"metadata":{},"sourceType":"module"}