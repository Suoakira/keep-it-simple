{"ast":null,"code":"import _classCallCheck from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/src/components/exisitingplancard.js\";\nimport React, { Component } from 'react';\nimport { Button, List, Progress, Loader } from 'semantic-ui-react';\nimport API from \"../API\";\n\nvar exisitingPlanCard =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(exisitingPlanCard, _Component);\n\n  function exisitingPlanCard(props) {\n    var _this;\n\n    _classCallCheck(this, exisitingPlanCard);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(exisitingPlanCard).call(this, props));\n\n    _this.increment = function () {\n      return _this.setState({\n        percent: _this.state.percent >= 100 ? 0 : _this.state.percent + 20\n      });\n    };\n\n    _this.noDaysBetween = function (date1, date2) {\n      var oneDay = 24 * 60 * 60 * 1000;\n      var daysToGo = Math.round(Math.abs((date2.getTime() - date1.getTime()) / oneDay));\n      return daysToGo;\n    };\n\n    _this.leftToSave = function () {\n      return _this.noDaysToGo() * _this.averageSavingperDay();\n    };\n\n    _this.hasSavedSofar = function () {\n      return _this.noDaysExpired() * _this.averageSavingperDay();\n    };\n\n    _this.averageSavingperDay = function (amount) {\n      return Math.round(_this.state.amount / _this.totalNoDays());\n    };\n\n    _this.noDaysExpired = function () {\n      var startDate = new Date(_this.props.savingTargets.start_date);\n      var currentDate = new Date(Date.now());\n      return _this.noDaysBetween(startDate, currentDate);\n    };\n\n    _this.totalNoDays = function () {\n      var startDate = new Date(_this.props.savingTargets.start_date);\n      var endDate = new Date(_this.props.savingTargets.end_date);\n      return _this.noDaysBetween(startDate, endDate);\n    };\n\n    _this.hasStartDatePassed = function (date) {\n      if (new Date(Date.now()) > date) {\n        return new Date(Date.now());\n      } else {\n        return date;\n      }\n    };\n\n    _this.noDaysToGo = function () {\n      var currentDate = _this.hasStartDatePassed(_this.props.savingTargets.startDate);\n\n      var endDate = new Date(_this.props.savingTargets.end_date);\n\n      var daysToGo = _this.noDaysBetween(currentDate, endDate);\n\n      if (daysToGo > 0) {\n        return daysToGo;\n      } else {\n        return 0;\n      }\n    };\n\n    _this.convertDateToString = function () {\n      return new Date(Date.parse(_this.props.savingTargets.start_date)).toDateString();\n    };\n\n    _this.deletePlan = function () {\n      API.deleteSavingTarget(_this.props.savingTargets);\n\n      _this.props.localeDelete(_this.props.savingTargets);\n    };\n\n    _this.percentToSave = function () {\n      if (_this.state.userSavingTargets) {\n        var percent = _this.leftToSave() / _this.state.userSavingTargets.user_saving_targets[0].amount * 100;\n        return Math.round(percent);\n      }\n    };\n\n    _this.mapThroughUserSavingTargets = function () {\n      return _this.state.userSavingTargets.user_saving_targets.map(function (save) {\n        return console.log(save);\n      });\n    };\n\n    _this.state = {\n      userSavingTargets: undefined,\n      percent: 0\n    };\n    return _this;\n  }\n\n  _createClass(exisitingPlanCard, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      fetch(\"http://localhost:3000/api/v1/saving_targets/\".concat(this.props.savingTargets.id)).then(function (data) {\n        return data.json();\n      }).then(function (savingTs) {\n        return _this2.setState({\n          userSavingTargets: savingTs,\n          amount: savingTs.user_saving_targets[0].amount\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var userSavingTargets = this.state.userSavingTargets;\n      var savingTargets = this.props.savingTargets;\n      console.log(\"-------------\");\n      console.log(savingTargets.name);\n      console.log(\"days to go \".concat(this.noDaysToGo()));\n      console.log(\"plan total days \".concat(this.totalNoDays()));\n      console.log(\"days expired on plan \".concat(this.noDaysExpired()));\n      console.log(\"amount per day \\xA3\".concat(this.averageSavingperDay()));\n      console.log(\"Left to save \\xA3\".concat(this.leftToSave()));\n      console.log(\"amount you have saved so far \\xA3\".concat(this.hasSavedSofar()));\n      console.log(\"-------------\");\n      return React.createElement(\"div\", {\n        class: \"four wide colum\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"ui link cards\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: savingTargets.target_image,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, savingTargets.category)), React.createElement(\"div\", {\n        className: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, savingTargets.name)), React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, this.state.userSavingTargets ? React.createElement(\"div\", {\n        className: \"extra content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(List, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(List.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(List.Icon, {\n        name: \"calendar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(List.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, this.noDaysToGo(), \" Days to Deadline\")), React.createElement(List.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(List.Icon, {\n        name: \"lock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), React.createElement(List.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, this.hasSavedSofar())), React.createElement(List.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(List.Icon, {\n        name: \"pound sign\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }), React.createElement(List.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, this.state.userSavingTargets.user_saving_targets[0].amount - this.leftToSave(), \"/\", this.state.userSavingTargets.user_saving_targets[0].amount, \" Raised\")), React.createElement(List.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(List.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(Progress, {\n        percent: 100 - this.percentToSave(),\n        indicating: true,\n        progress: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }))))) : React.createElement(Loader, {\n        active: true,\n        inline: \"centered\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"extra content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"right floated\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(Button, {\n        negative: true,\n        size: \"small\",\n        onClick: function onClick() {\n          return _this3.deletePlan();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"X\"), React.createElement(Button, {\n        primary: true,\n        size: \"small\",\n        onClick: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"More Info\"))), React.createElement(\"div\", {\n        className: \"extra content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"right floated\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"Plan Launched \", this.convertDateToString()), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return exisitingPlanCard;\n}(Component);\n\nexport default exisitingPlanCard;","map":{"version":3,"sources":["/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/src/components/exisitingplancard.js"],"names":["React","Component","Button","List","Progress","Loader","API","exisitingPlanCard","props","increment","setState","percent","state","noDaysBetween","date1","date2","oneDay","daysToGo","Math","round","abs","getTime","leftToSave","noDaysToGo","averageSavingperDay","hasSavedSofar","noDaysExpired","amount","totalNoDays","startDate","Date","savingTargets","start_date","currentDate","now","endDate","end_date","hasStartDatePassed","date","convertDateToString","parse","toDateString","deletePlan","deleteSavingTarget","localeDelete","percentToSave","userSavingTargets","user_saving_targets","mapThroughUserSavingTargets","map","save","console","log","undefined","fetch","id","then","data","json","savingTs","name","target_image","category"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button, List, Progress, Loader } from 'semantic-ui-react'\nimport API from \"../API\"\n\nclass exisitingPlanCard extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            userSavingTargets: undefined,\n            percent: 0\n         }\n    }\n\n    increment = () =>\n        this.setState({\n            percent: this.state.percent >= 100 ? 0 : this.state.percent + 20,\n        })\n\n    noDaysBetween = (date1, date2) => {\n        const oneDay = 24 * 60 * 60 * 1000\n        const daysToGo = Math.round(Math.abs((date2.getTime() - date1.getTime()) / (oneDay)))\n        return daysToGo\n    }\n\n    leftToSave = () => {\n        return (this.noDaysToGo() * this.averageSavingperDay())       \n    }\n\n    hasSavedSofar = () => {\n        return (this.noDaysExpired() * this.averageSavingperDay())   \n    }\n\n    averageSavingperDay = (amount) => {\n        return Math.round(this.state.amount/this.totalNoDays())    \n    }\n\n    noDaysExpired = () => {\n        const startDate = new Date(this.props.savingTargets.start_date)\n        const currentDate = new Date(Date.now())\n        return this.noDaysBetween(startDate, currentDate)\n\n    }\n\n    totalNoDays = () => {\n        const startDate = new Date (this.props.savingTargets.start_date)\n        const endDate = new Date (this.props.savingTargets.end_date)\n        return this.noDaysBetween(startDate, endDate)\n    }\n\n    hasStartDatePassed = (date) => {\n        if (new Date(Date.now()) > date) {\n            return new Date(Date.now())\n        } else {\n            return date\n        }\n    }\n\n    noDaysToGo = () => {\n\n        const currentDate = this.hasStartDatePassed(this.props.savingTargets.startDate)\n        const endDate = new Date(this.props.savingTargets.end_date)\n        const daysToGo = this.noDaysBetween(currentDate, endDate)\n\n        if (daysToGo > 0) {\n            return daysToGo\n        } else {\n            return 0\n        }\n    }\n\n    convertDateToString = () => \n         new Date(Date.parse(this.props.savingTargets.start_date)).toDateString()\n\n    \n    deletePlan = () => {\n        API.deleteSavingTarget(this.props.savingTargets)\n        this.props.localeDelete(this.props.savingTargets)\n    }\n\n    percentToSave = () => {\n        if (this.state.userSavingTargets) {\n            const percent= (this.leftToSave()/this.state.userSavingTargets.user_saving_targets[0].amount) * 100\n            return Math.round(percent)\n        }\n\n    }\n\n    mapThroughUserSavingTargets = () =>\n        this.state.userSavingTargets.user_saving_targets.map(save => console.log(save))\n    \n\n    componentDidMount() {\n        fetch(`http://localhost:3000/api/v1/saving_targets/${this.props.savingTargets.id}`)\n            .then(data => data.json())\n            .then(savingTs => this.setState({ \n                userSavingTargets: savingTs,\n                amount: savingTs.user_saving_targets[0].amount\n            }))\n    }\n\n    render() { \n\n\n        const { userSavingTargets } = this.state\n        const { savingTargets } = this.props\n        console.log(\"-------------\")\n        console.log(savingTargets.name)\n        console.log(`days to go ${this.noDaysToGo()}`)\n        console.log(`plan total days ${this.totalNoDays()}`)\n        console.log(`days expired on plan ${this.noDaysExpired()}`)\n        console.log(`amount per day £${this.averageSavingperDay()}`)\n        console.log(`Left to save £${this.leftToSave()}`)\n        console.log(`amount you have saved so far £${this.hasSavedSofar()}`)\n\n        console.log(\"-------------\")\n\n            return (\n\n                <div class=\"four wide colum\">            \n                <div class=\"ui link cards\">\n                    <div className=\"card\">\n                        <div className=\"image\">\n                        <img src={savingTargets.target_image} />\n                        </div>\n                        <div className=\"content\">\n                            <div className=\"header\">\n                                <a>{savingTargets.category}</a>\n                             </div>\n                            <div className=\"description\">\n                                {savingTargets.name}\n                            </div>\n                        </div>\n                        <React.Fragment>\n                            {this.state.userSavingTargets ?\n                                <div className=\"extra content\">\n                                    <List>\n                                        <List.Item>\n                                            <List.Icon name='calendar' />\n                                            <List.Content>{this.noDaysToGo()} Days to Deadline</List.Content>\n                                        </List.Item>\n                                        <List.Item>\n                                            <List.Icon name='lock' />\n                                            <List.Content>{this.hasSavedSofar()}</List.Content>\n                                        </List.Item>\n                                        <List.Item>\n                                            <List.Icon name='pound sign' />\n                                                <List.Content>{(this.state.userSavingTargets.user_saving_targets[0].amount - this.leftToSave())}/{this.state.userSavingTargets.user_saving_targets[0].amount} Raised</List.Content>\n                                        </List.Item>\n                                        <List.Item>\n                                            <List.Content>\n                                                <Progress percent={100 - this.percentToSave()} indicating progress />\n                                            </List.Content>\n                                        </List.Item>      \n                                    </List>\n                                </div>\n                                    :\n                                    <Loader active inline='centered' />\n                   \n                            }\n                            </React.Fragment>\n                            <div className=\"extra content\">\n                            <span className=\"right floated\">\n                                <Button\n                                    negative\n                                    size=\"small\"\n                                    onClick={() => this.deletePlan()}\n                                >\n                                    X\n                                </Button>\n                                <Button\n                                    primary\n                                    size=\"small\"\n                                    onClick=\"\"\n                                >\n                                    More Info\n                                </Button>\n                            </span>\n                            </div>\n                            <div className=\"extra content\">\n                                <span className=\"right floated\">\n                            Plan Launched {this.convertDateToString()}\n                            </span>\n                            <span>\n                                    \n                                {/* {savingTargets.end_date} */}\n                            </span>\n                            </div>\n\n                    </div>\n                </div>\n            </div>\n        \n            )\n        \n         \n    }\n}\n \nexport default exisitingPlanCard;"]},"metadata":{},"sourceType":"module"}