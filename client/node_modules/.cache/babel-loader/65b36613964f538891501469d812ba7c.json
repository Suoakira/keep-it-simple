{"ast":null,"code":"import _defineProperty from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/src/containers/mapcomments.js\";\nimport React, { Component } from 'react';\nimport { Modal, Button, Comment, Form, Header } from 'semantic-ui-react';\nimport CommentCard from \"../components/commentcard\";\nimport API from \"../API\";\n\nvar MapComments =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MapComments, _Component);\n\n  function MapComments(props) {\n    var _this;\n\n    _classCallCheck(this, MapComments);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MapComments).call(this, props));\n\n    _this.userFromId = function (id) {\n      var copyUsers = _toConsumableArray(_this.state.users);\n\n      var user = copyUsers.filter(function (user) {\n        return user.id === id;\n      })[0];\n      return [user.username, user.image_url];\n    };\n\n    _this.mapComments = function () {\n      var copyComments = _toConsumableArray(_this.state.userComments);\n\n      return copyComments.map(function (comment) {\n        return React.createElement(CommentCard, {\n          comment: comment.text,\n          date: comment.created_at,\n          username: _this.userFromId(comment.user_id)[0],\n          image: _this.userFromId(comment.user_id)[1],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 24\n          },\n          __self: this\n        });\n      });\n    };\n\n    _this.handleChange = function (e, _ref) {\n      var name = _ref.name,\n          value = _ref.value;\n      return _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleSubmit = function () {\n      var comment = {\n        user_id: _this.props.userId,\n        saving_target_id: _this.props.savingTargetId,\n        text: _this.state.comment\n      };\n      API.postComment(comment).then(function (data) {\n        if (data.error) {\n          console.log(\"error: \".concat(data.error));\n        } else {\n          _this.setState({\n            userComments: _toConsumableArray(_this.state.userComments)\n          });\n        }\n      });\n    };\n\n    _this.state = {\n      comment: undefined\n    };\n    return _this;\n  }\n\n  _createClass(MapComments, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      fetch(\"http://localhost:3000/api/v1/users\").then(function (data) {\n        return data.json();\n      }).then(function (users) {\n        return _this2.setState({\n          users: users,\n          userComments: _this2.props.userSavingTargets.comments\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var comment = this.state.comment;\n      var _this$props = this.props,\n          open = _this$props.open,\n          close = _this$props.close;\n      return React.createElement(Modal, {\n        dimmer: \"blurring\",\n        open: open,\n        onClose: close,\n        closeOnDimmerClick: false,\n        centered: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Modal.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(Comment.Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(Header, {\n        as: \"h3\",\n        dividing: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"Comments\"), this.props.userSavingTargets && this.state.users ? this.mapComments() : null, React.createElement(Form, {\n        onSubmit: function onSubmit() {\n          return _this3.handleSubmit();\n        },\n        reply: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(Form.TextArea, {\n        name: \"comment\",\n        value: comment,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(Button, {\n        onClick: function onClick() {\n          return _this3.handleSubmit();\n        },\n        content: \"Add Reply\",\n        labelPosition: \"left\",\n        icon: \"edit\",\n        primary: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      })))), React.createElement(Modal.Actions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(Button, {\n        primary: true,\n        icon: \"checkmark\",\n        labelPosition: \"right\",\n        content: \"Close\",\n        onClick: close,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return MapComments;\n}(Component);\n\nexport default MapComments;","map":{"version":3,"sources":["/Users/home/Development/end_of_module_projects/module5/final_project/keep-it-simple/client/src/containers/mapcomments.js"],"names":["React","Component","Modal","Button","Comment","Form","Header","CommentCard","API","MapComments","props","userFromId","id","copyUsers","state","users","user","filter","username","image_url","mapComments","copyComments","userComments","map","comment","text","created_at","user_id","handleChange","e","name","value","setState","handleSubmit","userId","saving_target_id","savingTargetId","postComment","then","data","error","console","log","undefined","fetch","json","userSavingTargets","comments","open","close"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Modal, Button, Comment, Form, Header } from 'semantic-ui-react'\nimport CommentCard from \"../components/commentcard\"\nimport API from \"../API\"\n\nclass MapComments extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = { \n            comment: undefined\n         }\n    }\n\n    userFromId = (id) => {\n        const copyUsers = [...this.state.users]\n        const user = copyUsers.filter(user => user.id === id)[0]\n        return [user.username, user.image_url]\n    }\n\n    mapComments = () => {\n        const copyComments = [...this.state.userComments]\n        return copyComments.map(comment => \n        <CommentCard \n        comment={comment.text} \n        date={comment.created_at} \n        username={this.userFromId(comment.user_id)[0]}\n        image={this.userFromId(comment.user_id)[1]}  \n        />\n          )\n    }\n\n    handleChange = (e, { name, value }) => this.setState({ [name]: value })\n\n    handleSubmit = () => {\n\n        const comment = {\n            user_id: this.props.userId,\n            saving_target_id: this.props.savingTargetId,\n            text: this.state.comment            \n        }\n\n        API.postComment(comment)\n            .then(data => {\n                if (data.error) {\n                    console.log(`error: ${data.error}`)\n                } else {\n                    this.setState({ userComments: [...this.state.userComments]})\n                }\n            })\n    }\n\n    componentDidMount() {\n        fetch(\"http://localhost:3000/api/v1/users\")\n            .then(data => data.json())\n            .then(users => this.setState({ \n                users: users,\n                userComments: this.props.userSavingTargets.comments\n            }))\n    }\n\n    render() { \n        const { comment } = this.state\n        const { open, close } = this.props\n        return (\n            <Modal dimmer=\"blurring\" open={open} onClose={close} closeOnDimmerClick={false} centered={false}>\n                <Modal.Content>\n     \n                    <Comment.Group>\n                        <Header as='h3' dividing>\n                            Comments\n                        </Header>\n                        {(this.props.userSavingTargets && this.state.users) ?\n                                this.mapComments()\n                                :\n                                null\n                            }\n                        <Form onSubmit={() => this.handleSubmit()}reply>\n                            <Form.TextArea\n                                name='comment'\n                                value={comment}\n                                onChange={this.handleChange}\n                                 />\n                            \n                            \n                        <Button onClick={() => this.handleSubmit()} content='Add Reply' labelPosition='left' icon='edit' primary />\n                        </Form>\n                    </Comment.Group>\n                </Modal.Content>\n                <Modal.Actions>\n                    <Button\n                        primary\n                        icon='checkmark'\n                        labelPosition='right'\n                        content=\"Close\"\n                        onClick={close}\n                    />\n                </Modal.Actions>\n            </Modal>\n          )\n    }\n}\n \nexport default MapComments\n\n\n"]},"metadata":{},"sourceType":"module"}